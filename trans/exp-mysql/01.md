第一章

![image](images/frontdot.jpg)

MySQL 和开源革命

开源系统正在迅速改变软件领域。世界各地的信息技术专业人员都注意到了开源软件供应商提供的高质量，在许多情况下是世界级的开发和支持。公司开始注意了，因为他们第一次有了商业专有软件供应商的替代品。小企业正在关注，因为开源软件可以显著降低他们信息系统的成本。个人之所以关注，是因为他们有了比以往更多的选择。使互联网成为今天这个样子的大部分基础都是基于开源软件系统，比如 Linux、Apache HTTP server、BIND、Sendmail、OpenSSL、MySQL 等等。

企业使用开源软件最常见的原因是成本。开源软件，就其本质而言，降低了总拥有成本(TCO ),并提供了一种可行的商业模式，企业可以在此基础上建立或改善其市场。对于开源数据库系统来说尤其如此，因为商业专有系统的成本很容易达到数万或数十万美元。

对于刚刚起步的小企业来说，这笔资金支出可能会影响其成长。例如，如果一家初创公司不得不花费大量储备，它可能无法将其产品推向市场，因此可能无法在竞争激烈的市场中站稳脚跟。开源为创业公司提供了推迟购买软件的机会，直到他们能够承担投资。然而，这并不意味着他们在用劣质组件构建基础设施。

开源软件曾经被许多人认为是仅限于爱好者或黑客，他们致力于颠覆大型商业软件公司的市场。虽然一些开发人员可能觉得他们在扮演微软巨人的角色，但是开源社区完全不是这样。它并不自称是商业专有软件的替代品，而是提出开源哲学作为替代。正如您将在本章中看到的，开源不仅是商业软件的一个可行的替代方案，而且它还推动了一场软件开发、发展和营销方式的世界性革命。

![image](images/sq.jpg) **注**在本书中，术语“黑客”指的是理查德·斯托尔曼的定义:“喜欢编程并喜欢耍小聪明的人，” [<sup> 1 </sup>](#Fn1) 而不是人们通常认为的一个一心盗窃信用卡和破坏计算机系统的邪恶恶棍。

以下部分是为那些不熟悉开源软件或 MySQL 哲学的人提供的。如果你已经熟悉开源软件的理念，你可以跳到“用 MySQL 开发”一节

什么是开源软件？

开源软件是从对公司财产心态的有意识抵制中成长起来的。20 世纪 70 年代，在麻省理工学院(MIT)人工智能实验室工作时，理查德·斯托尔曼开始了一场代码共享运动。在让所有程序员都能使用常用代码的愿望驱使下，斯托曼看到了开发人员合作社区的需要。这种哲学对 Stallman 和他的小团体很有效——直到行业集体决定软件是财产，不应该与潜在的竞争者分享。这导致许多麻省理工学院的研究人员被吸引到这些公司工作。最终，合作社区逐渐消失。

幸运的是，斯托曼抵制了这种趋势，离开了麻省理工学院，开始了 GNU (GNU 不是 Unix)项目和自由软件基金会(FSF)。GNU 项目的目标是生产一个免费的类似 Unix 的操作系统。这个系统将是免费的(包括访问源代码)，任何人都可以使用。“免费”的概念是不禁止任何人使用和修改系统。

斯托曼的目标是重建在麻省理工学院运作良好的开发者合作社区。然而，他有先见之明，意识到这个系统需要版权许可来保证某些自由。(有些人把斯托曼对版权的理解称为“左版权”，因为它保障了自由，而不是限制了自由。)斯托曼创建了 GNU 公共许可证(GPL)。GPL 是一个巧妙的法律许可作品，它允许代码不受限制地被复制和修改，规定衍生作品(修改后的副本)必须在与原始版本相同的许可下发布，没有任何附加限制。从本质上讲，这是通过完全去除专有元素来利用版权法对抗版权。

不幸的是，斯托曼的 GNU 项目从未完全实现，但它的几个部分已经成为许多开源系统的基本元素。其中最成功的包括用于 C 编程语言的 GNU 编译器(GCC)和 GNU 文本编辑器(Emacs)。尽管 GNU 操作系统未能完成，但斯托尔曼和他的追随者们的开拓性努力使得 Linus Torvalds 在 1991 年用他的 Linux 操作系统填补了空白，当时它还处于婴儿期。Linux 已经成为斯托曼设想的免费的类 Unix 操作系统(参见“为什么 Linux 如此受欢迎？”).今天，Linux 是世界上最流行和最成功的开源操作系统。

为什么 LINUX 这么受欢迎？

Linux 是建立在开源模式上的类 Unix 操作系统。因此，任何人都可以免费使用、分发和修改它。Linux 使用了一种保守的内核设计，这种设计已经被证明是易于发展和改进的。自从 1991 年发布以来，Linux 已经在全世界范围内赢得了寻求提高其性能和可靠性的开发人员的支持。有些人甚至声称 Linux 是所有操作系统中发展得最好的。自发布以来，Linux 已经获得了世界服务器和工作站安装的巨大市场份额。Linux 经常被认为是迄今为止最成功的开源努力。

我们可以从社区中较小的团体带来的许多变体中看到 Linux 的成功。这些变体中的许多，比如 Ubuntu，都是由控制产品发展的公司(Canonical)所拥有的。虽然仍然是 Linux，但 Ubuntu 是一个很好的例子，说明所有权如何通过核心产品的增值改造来推动创新和差异化。

自由软件运动有一个问题。“免费”的本意是保证使用、修改和分发的自由，而不是免费或免费到好人家(通常解释为“免费”是言论自由，而不是免费啤酒)。为了消除这种误解，开放源码倡议(OSI)成立了，后来采用并推广了“开放源码”一词来描述 GPL 所保证的自由；在[www.opensource.org](http://www.opensource.org)访问网站。

OSI 的努力改变了自由软件运动。软件开发者有机会区分真正没有成本的自由软件和作为合作社区一部分的开放软件。随着互联网的爆炸，合作社区已经成为一个全球性的开发人员社区，确保了斯托尔曼愿景的延续。

因此，开放源码软件是一种被许可的软件，它保证开发者在加入一个合作团体时使用、复制、修改和分发他们的软件的权利，该团体的自然目标是发展和培养更高质量的软件。开源并不意味着零成本。这确实意味着任何人都可以参与软件的开发，并且可以免费使用软件。另一方面，许多开源系统是由销售软件支持服务的组织托管和分发的。这允许使用该软件的组织通过消除启动成本和在许多情况下节省大量维护成本来降低他们的信息技术成本。

今天所有的开源系统都是从 Stallman 和其他人努力创造的软件乌托邦的工作基础中汲取血统，Stallman 认为组织应该通过出售服务而不是私有产权来获得收入。有几个 Stallman 的设想变成现实的例子。GNU/Linux(以下简称为 Linux)运动已经产生了许多成功的(并且盈利的)公司，比如 Red Hat 和 Slackware，它们出售定制的发行版和对 Linux 的支持。另一个例子是 MySQL，它已经成为最成功的开源数据库系统。

尽管软件乌托邦的概念在今天可能还没有成为现实，但下载一整套系统和工具来驱动个人或商业计算机而不在软件本身上花费任何钱是可能的。任何人都可以下载和使用免费版本的软件，从操作系统和服务器系统(如数据库和 web 服务器)到生产力软件。

为什么要使用开源软件？

迟早有人会问为什么使用开源软件是个好主意。为了成功抵御来自商业专有软件支持者的挑战，你应该有一个可靠的答案。采用开源软件的最重要原因是:

*   开源软件的使用成本很低甚至为零。这对于非营利组织、大学和社区组织来说尤其重要，因为它们的预算在不断缩减，每年都必须以更少的资源做更多的事情。
*   您可以修改来满足您的特定需求。
*   可用的许可机制比商业许可更加灵活。
*   开源软件比商业专有软件更健壮(经过测试)。
*   开源软件比商业专有软件更加可靠和安全。

虽然你可能不会被质疑或被要求证明采用开源软件的任何理由，但你可能会受到矛盾的挑战——也就是说，商业专有软件的支持者(开源的反对者)会试图通过陈述为什么不应该使用开源软件进行开发来质疑这些说法。让我们从商业专有软件的角度来研究一些不使用开源软件的更流行的理由，并用开源观点来反驳它们。

神话 1:商业专有软件培养更大的创造力

理由是:大多数企业级商业专有软件都提供了应用编程接口(API ),允许开发人员扩展其功能，从而使软件更加灵活，并确保开发人员有更大的创造力。

这其中有些是真的。API 确实允许开发人员扩展软件，但他们通常以严格禁止开发人员向基础软件添加功能的方式来扩展软件。这些 API 经常迫使开发人员进入沙箱，进一步限制了她的创造力。

例如，微软。Net 语言 C#被公认为是一门非常好的语言。然而，API 不容易修改。事实上，只有在安装宿主产品 Visual Studio 时，才会收到二进制形式的库。您可以用类派生来扩充 API，但是严格地说，您不能编辑 API 本身的源代码。

![image](images/sq.jpg) **注意**沙箱经常被创建来限制开发者影响核心系统的能力，很大程度上是为了安全。API 越开放，邪恶的开发者就越有可能创建恶意代码来破坏系统或其数据。

开源软件也可能支持并提供 API，但它为开发者提供了查看核心系统实际源代码的能力。他们不仅可以看到源代码，还可以自由地(并被鼓励)修改它！(例如，当一个关键特性不可用时，或者您需要系统读取或写入特定格式时，您可能想要修改核心系统。)因此，开源软件比商业专有软件更能培养创造力。

误区二:商业专有软件比开源软件 更安全

理由是:在当今互联网连接的社会中，组织要求他们的信息系统比以往任何时候都更安全。商业专有软件本质上更安全，因为销售软件的公司在确保他们的产品能够抵御当今数字掠夺者的攻击方面有更大的利益。

尽管这一声明的目标很可能作为任何商业软件供应商的口头禅出现在会议室的墙上，但这一目标的实现，或者在某些情况下的营销声明，通常是误导性的或无法实现的。

研究表明，开源软件开发的本质有助于使软件更加安全<sup>，</sup>，因为根据定义，开源软件是由一个团体和一个社区开发的，他们有兴趣为产品寻找最好的东西。事实上，对源代码的严格审查和开放确保了没有任何东西可以隐藏起来，无论是缺陷还是遗漏。因为源代码对所有人都是可用的，所以强化他的代码符合每个开源开发者的最大利益——不管是恶意的还是良性的。

误解 3:商业专有软件被测试的次数比开源软件多

说法是:软件商卖软件。他们出售的产品必须保持高质量标准，否则顾客不会购买。开源软件没有任何这样的压力，因此没有像商业专利软件那样严格测试。

这个论点很有说服力。事实上，它打动了所有信息技术收购代理人的心。他们相信，你花钱买的东西比免费获得的软件更可靠，没有缺陷。不幸的是，这些人忽略了开源软件的一个重要概念:它是由全球开发者社区开发的，其中许多人认为自己是缺陷侦探(测试员)，并以发现和报告缺陷为荣。在某些情况下，开源软件公司为发现可重复错误的开发人员提供奖励。

诚然，软件供应商雇佣软件测试人员(毫无疑问，他们是他们领域中的佼佼者)，但更多的时候，商业软件项目被推向一个特定的截止日期，并从公司目标的角度关注产品的好处——通常由营销机会驱动。设置这些截止日期是为了确保战略发布日期或竞争优势。很多时候，这些截止日期迫使软件供应商在他们软件开发过程的某些部分上妥协——通常是后面的部分:测试。可以想象，减少测试人员对软件的访问(测试时间)意味着他们会发现更少的缺陷。

开源软件公司通过获得全球开发者社区的帮助和支持，确保他们的软件被更多的人更频繁地测试，这些人只考虑产品本身的好处，而不是通常被可能影响他们审查软件的能力的目标所驱动。事实上，一些开源社区成员在评估一个新特性或版本时有时会毫不留情。相信我，如果没有达到他们的期望，他们会让你知道的。

误解 4:商业专有系统比开源系统 拥有更复杂的功能和更完整的特性集

论点是:商业专有数据库系统是复杂的服务器系统。开源系统既不够大，也不够复杂，无法处理关键任务企业 数据。

尽管一些开源系统很好地模仿了它们所模仿的商业系统，但对于像 MySQL 这样的数据库系统来说就不一样了。MySQL 的早期版本不具备商业专有数据库系统中的所有功能，但从 5.0 版本开始，尤其是最新版本，MySQL 包含了一些主要功能，被认为是世界上最受欢迎的开源数据库系统。

此外，MySQL 已被证明能够提供大型企业对关键任务数据所需的可靠性、性能和可伸缩性，许多知名组织都在使用它。MySQL 是一个开源系统，它提供了最好的商业专有数据库系统的所有特性和功能。

误解 5:商业专有软件供应商反应更快，因为他们有专门的员工

论点是这样的:当一个软件系统被购买时，该软件附带了保证，即生产它的公司将提供帮助或帮助解决问题。因为没有人“拥有”开源系统，所以获得帮助要困难得多。

大多数开源软件都是由全球开发者社区构建的。然而，日益增长的趋势是将商业模式建立在开源哲学的基础上，并围绕它建立一家公司，为该公司监管的软件销售支持和服务。大多数主要的开源产品都以这种方式得到支持。例如，甲骨文公司拥有其 MySQL 产品的源代码。(关于甲骨文 MySQL 开源许可的完整描述，请参见[www . MySQL . com/company/legal/licensing/opensource-license . htm](http://www.mysql.com/company/legal/licensing/opensource-license.htm)。)

开源软件的开发者对问题的反应比商业开发者要快得多。事实上，许多人对公开他们的产品感到非常自豪，并密切关注世界对他们的看法。另一方面，与商业软件开发者直接对话几乎是不可能的。例如，微软有一个全面的支持机制，可以满足几乎任何组织的需求。然而，如果你想与微软产品的开发者交谈，你必须通过适当的渠道。这需要与支持层级的每一个阶段进行沟通——即使这样，你也不能保证与开发人员取得联系。

另一方面，开源开发者使用互联网作为他们主要的交流方式。由于他们已经在互联网上，他们更有可能在论坛或新闻组中看到你的问题。此外，像 Oracle 这样的开源公司积极地监控他们的社区，并且可以快速地响应他们的客户。

因此，购买商业专有软件并不能保证你的响应时间比开源软件更快。在许多情况下，开源软件开发人员比商业软件开发人员反应更快(更容易接触到)。

如果他们想要证据呢？T2】

当你试图在你的组织中采用开源软件时，这些仅仅是可能导致你悲伤的一些争论。一些研究人员试图证明开源软件比商业软件更好。一个是 James W. Paulson，他对开放源代码和商业专有软件(他称之为“封闭的”)进行了一项实证研究，该研究检验了前面的论点，并证明了开放源代码软件开发可以证明相对于商业专有软件开发的可测量的改进。参见 2004 年 4 月出版的 IEEE 软件工程汇刊中 Paulson 的文章“开源和闭源软件产品的实证研究”。

开源真的是商业软件的威胁吗？

直到最近，开源软件还不被认为是对商业专有软件巨头的威胁，但甲骨文的一个竞争对手开始展示出经典的 应对竞争威胁的迹象。尽管微软最近做出了开放的努力 [<sup>2</sup>](#Fn2) ，微软继续公开反对开源软件，谴责 MySQL 是世界一流的数据库服务器，同时消极地忽视威胁，甲骨文却采取了一种截然不同的策略。

自从通过收购 Sun Microsystems 获得 MySQL 以来，Oracle 继续投入大量资源来增强 MySQL。Oracle 已经并将继续投资于开发，以使 MySQL 成为世界上最好的 web 数据库系统。

竞争的压力不仅限于 MySQL 和专有数据库系统。至少有一个开源数据库系统 Apache Derby 将自己标榜为 MySQL 的替代者，并且最近将其帽子扔进了环中，作为 LAMP 栈中“M”的替代者(参见“什么是 LAMP 栈？”).Apache Derby 的支持者列举了 MySQL 的许可问题和功能限制。既没有阻止 MySQL 的安装基础，也没有这些“问题”限制 MySQL 的日益普及。

**什么是灯栈？**

LAMP 代表 Linux，Apache，MySQL，以及 PHP/Perl/Python 。LAMP stack 是一组开源服务器、服务和编程语言，允许快速开发和部署高质量的 web 应用程序。关键组件包括

*   *Linux* :类似 Unix 的操作系统。Linux 以其高度的可靠性和速度以及支持的硬件平台的多样性而闻名。
*   Apache :以高可靠性和易于配置著称的 web 应用服务器。Apache 运行在大多数 Unix 操作系统上。
*   MySQL :许多 web 应用开发者的首选数据库系统。MySQL 以其速度和较小的执行占用空间而闻名。
*   PHP/Perl/Python :这些是脚本语言，可以嵌入到 HTML 网页中，用于事件的编程执行。这些脚本语言代表 LAMP 堆栈的活动编程元素。它们用于连接系统资源和后端数据库系统，为用户提供活动内容。虽然大多数 LAMP 开发人员更喜欢 PHP 而不是其他脚本语言，但是每种语言都可以用来成功地开发 web 应用程序。

使用灯堆栈进行开发有很多好处。最大的是成本。所有 LAMP 组件都可以作为免费的开源许可证获得。组织可以在几个小时内下载、安装和开发 web 应用程序，而软件的初始成本很少或没有。

提供开源数据库系统的好处的一个有趣的指标是最近一些专有数据库供应商提供的“免费”版本。微软一直是开源软件的公开反对者，现在它提供了一个名为 SQL Server Express 的免费版本的 SQL Server 数据库系统。尽管下载该软件是免费的，并且您被允许将该软件与您的应用程序一起分发，但您可能看不到源代码或以任何方式修改它。该版本的功能集有限，如果不购买额外的软件和服务，就无法扩展到完整的企业级数据库服务器。

显然，甲骨文公司以其 MySQL 服务器产品开辟的道路证明了对专有数据库市场的威胁——商业专有软件行业正在认真对待这一威胁。尽管微软继续试图削弱开源软件市场，它也开始看到免费软件的智慧。

法律问题和 GNU 宣言T3】

商业专有软件许可证旨在限制您的自由和使用。大多数商业许可证都明确声明，作为软件的购买者，您并不拥有该软件，但可以在非常特定的条件下使用它。在几乎所有情况下，这意味着您不能以任何方式复制、分发或修改系统。这些许可证也清楚地表明，源代码是由许可方独家拥有的，您，即被许可方，不允许查看或重新设计它。

![image](images/sq.jpg) **注意**本节是对通用公共许可证的一般性讨论。软件提供商通常有自己的许可证形式，并可能以微妙但不同的方式解释其合法性。请始终联系软件提供商，以澄清您希望行使的许可证的任何部分。如果您希望在自己的产品或服务中修改或包含软件的任何部分，这一点尤其正确。

开源系统通常使用基于 GNU 的许可协议(GNU 代表 GNU，而不是 Unix)授权，称为通用公共许可证(GPL)。更多详情见[http://www.gnu.org/licenses/](http://www.gnu.org/licenses/)。大多数 GPL 许可证允许自由使用原始源代码，但有一个限制，即所有修改都必须公开或作为合法所有权返还给创作者。此外，大多数开放源码系统使用 GPL 协议，该协议声明它旨在保证您复制、分发和修改软件的权利。请注意，GPL 并不限制您使用软件的权利；事实上，它特别授予你以你想要的方式使用软件的权利。GPL 也保证了你访问源代码的权利。所有这些权利都在 GNU 宣言和 GPL 协议(【www.gnu.org/licenses/gpl.html】T2)中有详细说明。

最有趣的是，GPL 特别允许你对原始源代码的发布收取发布费(或媒体费),并为你提供使用整个系统或修改系统的权利，以创建衍生产品，这也受同一 GPL 的保护。唯一的问题是，您需要将修改后的源代码提供给任何想要它的人。

这些限制并不妨碍你通过努力工作获得收入。相反，只要你通过原始所有者发布你的源代码，你就可以向你的客户收取衍生作品的费用。有些人可能会争辩说，这意味着你永远无法获得真正的竞争优势，因为你的源代码对每个人都是可用的，但在实践中恰恰相反。Canonical、Red Hat 和 Oracle 等供应商已经从基于 GPL 的商业模型中获利。

GPL 的唯一限制可能会让你犹豫，那就是对保证的限制，以及要求在你的软件中放置一个横幅说明作品的来源(原始和许可)。

如果你考虑到大多数商业许可都包含类似的条款，那么对明示担保的限制就不足为奇了。GPL 的独特之处在于无责任损失的概念。GPL 明确免除了创作者和您，即修改者(或发布者)因安装或使用软件而导致的损失或损害。Stallman 不希望法律行业因开源软件的责任问题而获利。逻辑很简单。您免费获得了该软件，并且您没有获得任何关于其性能或保护其免受因使用而造成的损害的保证。在这种情况下，没有交换条件，因此没有任何形式的保证。

开源运动的反对者将引用这一点作为避免开源软件的理由，声称这是“使用风险自担”，因此引入了太多的风险。虽然这是事实，但是当您从开源供应商那里购买支持时，这一论点就被削弱或无效了。开源供应商的支持选项通常包括某些责任权利和进一步的保护。这也许是购买开源软件支持的最有说服力的理由。在这种情况下，有交换条件，而且在许多情况下有可靠的保证。

在你的软件中一个可见的地方放置一个横幅的需求并不是那么繁重。GPL 只需要清楚地声明软件的来源和出处，并标记软件受 GPL 保护。这将告知使用本软件的任何人他们使用、复制、分发和修改本软件的权利(自由)。

也许 GNU 宣言中最重要的声明是“GNU 将如何可用”下面的陈述。在这一节中，宣言声明尽管每个人都可以修改和重新发布 GNU，但是没有人可以限制它的进一步重新发布。这意味着没有人可以把一个基于 GNU 宣言的开源系统变成一个专有系统或者进行专有修改。

属性

如果不包括财产问题，关于开放源码软件许可的讨论将是不完整的。财产仅仅是被拥有的东西。虽然通常认为财产是有形的东西，但在软件的情况下，这个概念变得有问题。当我们说软件是财产时，到底是什么意思？属性的概念适用于源代码、二进制文件(可执行文件)、文档，还是所有这些？

当谈到开源软件时，财产的概念通常是一个棘手的话题。如果软件是由全球开发者社区开发的，谁是所有者？在大多数情况下，开源软件始于某人或某个组织开发的项目。当软件足够成熟，对其他人有用时，项目就变成了开源。无论这是在早期阶段，当软件不精炼时，还是在后期，当软件达到一定的可靠性水平时，都不重要。重要的是启动项目的人或组织被认为是所有者。以 MySQL 为例，Oracle 公司发起了这个项目，因此它拥有 MySQL 系统。

根据 MySQL 坚持的 GPL，Oracle 拥有所有的源代码和在 GPL 下所做的任何修改。GPL 给了你修改 MySQL 的权利，但是它没有给你将源代码作为你的财产的权利。

**甲骨文真的拥有 MYSQL 吗？**

MySQL 作为一个组织进化的详细历史超出了本书的范围。MySQL 品牌、产品及其开发组织完全归甲骨文公司所有。作为 2010 年 1 月执行的 Sun Microsystems 合并的一部分，甲骨文收购了 MySQL。

尽管在欧洲有一些反垄断的争议，但合并是成功的，甲骨文承诺继续发展和演变 MySQL。到目前为止，Oracle 已经实现了这些承诺，并继续将 MySQL 发展成为世界领先的开源数据库系统。Oracle 继续像过去一样定位 MySQL:web 数据库(LAMP 中的 M)。

自收购以来，Oracle 发布了几个 MySQL 版本，包括更好的性能、集成 InnoDB 作为默认数据库、Windows 平台改进以及对复制的大量改进和创新，从而实现了高可用性功能。甲骨文确实是 MySQL 的所有者，也是迄今为止最大的保管者。

伦理的一面

当你第一次开始使用开源软件时，道德困境比比皆是。例如，开源软件可以免费下载，但你必须将你的任何改进交给原所有者。你怎么能从你不得不放弃的东西中赚钱呢？

要理解这一点，您必须考虑 Stallman 在开发 GNU 许可证模型时的目标:在全世界的开发者中建立一个合作和团结的社区。他希望源代码公开，生成的软件免费供任何人使用。你工作挣钱(获得报酬)的权利不受限制。你可以出售你的衍生作品。你不能声称拥有源代码的所有权。你在伦理上(和法律上！)必将回馈全球开发者社区。

当你修改开源软件供自己使用时，另一个道德困境出现了。例如，您下载了最新版本的 MySQL，并添加了一个特性，允许您对 SQL 命令使用自己的缩写快捷方式，因为您已经厌倦了键入冗长的 SQL 语句(我相信有人已经这样做了)。在这种情况下，你正在以一种只有利于你自己的方式修改系统。那么你为什么要交出你的修改呢？虽然这种困境对我们大多数人来说可能不是问题，但如果你继续使用带有你个人修改的软件并最终创作出一个衍生作品，它可能会成为你的问题。基本上，你所做的任何生产性的和有意义的修改必须被认为是原创者的财产，不管它的使用或使用的限制。

如果您将修改源代码作为一项学术练习(然而，我将在本书后面告诉您如何做)，您应该在完成练习或实验后放弃修改。一些开源软件为这些类型的使用做了准备。大多数人认为探索和试验源代码是对软件的“使用”，而不是修改，因此允许在学术研究中使用源代码。

让革命继续！

自由的理念驱使理查德·斯托尔曼开始寻求改革软件开发。虽然自由是开源运动的催化剂，但它已经成为一场革命，因为组织现在可以通过投资低成本软件系统来避免在竞争对手手中过时，同时保持收入以在市场中竞争。

采用开源软件作为产品线一部分的组织可能是所有组织中最具革命性的。大多数已经采用了基于 GPL 的商业模式，这种模式允许他们获得开源系统带来的所有经验和健壮性，同时仍然为他们自己的想法和附加内容创造收入。

软件行业对开源软件既嗤之以鼻，又赞不绝口。一些人鄙视开源，因为他们认为这是对商业专有软件行业的攻击。他们还声称开源只是一种时尚，不会长久。他们认为生产、贡献或使用开源软件的组织已经过时了，并相信世界迟早会醒悟并忘记开源软件。有些人并不轻视开源，因为他们看不到盈利的可能性，因此认为这个想法是徒劳的。

另一些人将开源软件视为救世主，将我们从商业专有软件的暴君手中拯救出来，他们相信大型软件公司迟早会被迫将他们的产权模式转变为开源或其某种变体。真相大概在中间。我认为开源行业是一个充满活力、不断发展的行业，由志同道合的人组成，他们的目标是创建安全、可靠、健壮的软件。他们通过提供基于和支持开源软件的服务来赚钱。有时是通过许可或支持销售，有时是通过定制和咨询。

无论是哪种方法，好的开源软件都可以独立成为一门生意。同样，无论你的观点如何，你必须得出结论，开源运动已经在各地的软件开发者中引起了一场革命。

现在你已经对开源革命有了一个很好的介绍，你可以决定你是否同意它的理念。如果你这样做了(我真诚地希望我已经说服了你)，那么欢迎来到全球开发者社区。革命万岁！

用 MySQL 开发

您已经了解了什么是开源软件，以及使用和开发开源软件的法律后果。现在您将学习如何使用 MySQL 开发产品。正如您将会看到的，MySQL 为开发人员提供了一个独特的机会，他们可以利用主要的服务器软件技术，而不必将他们的开发局限于一组固定的规则或有限的 API 套件。

MySQL 是一个关系数据库管理系统，设计用于客户机/服务器架构。MySQL 也可以作为嵌入式 数据库库。当然，如果您以前使用过 MySQL，您会熟悉它的功能，并且毫无疑问会选择 MySQL 来满足您的部分或全部数据库需求。

在系统的最底层，服务器是使用 C 和 C++混合编写的多线程模型构建的。这个核心功能大部分是在 20 世纪 80 年代早期构建的，后来在 1995 年用结构化查询语言(SQL)层进行了修改。MySQL 是使用 GNU C 编译器(GCC)构建的，它为目标环境提供了极大的灵活性。这意味着 MySQL 可以在任何 Linux 操作系统上编译使用。甲骨文在开发微软视窗和麦金塔操作系统的变体方面也取得了相当大的成功。MySQL 的客户端工具大部分是用 C 编写的，以获得更好的可移植性和速度。客户端库和访问机制可用于。NET、Java、ODBC 和其他一些语言。

**这个++是什么意思？**

有一次，当我还是大学生的时候。我旁听了一门 C++课程，主要是作为学习这门语言的动力。我发现学习一门新的编程语言是徒劳的，如果没有掌握这门语言的动机——比如及格。第一天上课，一个学生(不是我)问老师++代表什么。他的回答是，“额外的东西。”基于这个异想天开且不完全符合历史的答案，以及 MySQL 源代码有真正的 C 和 C++的事实，它更像 C+/-而不是 C 或 C++。C++最初被它的创建者命名为“C with classes ”,但后来在 1983 年改为 C++，对增量运算符使用了一个糟糕的双关语。换句话说，C++就是进化加法 [<sup>3</sup>](#Fn3) 的 C。

MySQL 是使用并行开发路径构建的，以确保在计划和开发软件的新版本时，产品线继续发展。软件开发遵循一个分阶段的开发过程，在这个过程中，每个阶段都会产生多个版本。MySQL 开发过程的各个阶段是:

1.  *开发*—新产品或功能集作为开发树的新路径被计划和实现。
2.  *Alpha*—实现了特性细化和缺陷修正(bug 修复)。
3.  *Beta*—特性被“冻结”(不能添加新特性)，并实施额外的密集测试和缺陷修正。
4.  *发布候选版本*——没有重大缺陷的稳定 beta 状态，代码被冻结(只有缺陷可能被修复)并进行最后几轮测试。
5.  *一般可用(GA)*—如果没有发现重大缺陷，代码被声明为稳定的，并准备好生产发布。

在这些阶段中的任何一个阶段，您都会经常看到各种版本的 MySQL 软件。通常情况下，只有 beta 版、候选版和正式版可供下载，但根据功能的重要性或支持订阅提出的功能请求的状态，alpha 版也可能提供。

当某个特定功能代表现有功能的重大变化或显著改进某个特定功能时，可能会在 dev.mysql.com 上提供实验室版本。一个实验室版本被认为是该特性的预览版，因此，它是用于评估目的的。通常，实验室发布的文档很少或没有。事实上，甲骨文在实验室网站上声明，“不适合生产[使用]。”你可以从 http://labs.mysql.com/下载实验报告。

当一组特性代表了功能或性能的重大进步时，可能会提供一个开发里程碑版本(DMR) 。DMR 可能具有处于不同发展阶段的几个特征。一个 DMR 软件可能有大部分功能处于测试状态，但也有一些功能处于测试状态，甚至是接近发布候选状态。因此，DMR 是跟踪和准备采用 MySQL 开发中的主要进展的关键方法。你可以在 http://dev.mysql.com/downloads/mysql/#downloads 的[找到 DMRs。](http://dev.mysql.com/downloads/mysql/#downloads)

你可以在 http://dev . MySQL . com/doc/MySQL-development-cycle/en/index . html 上阅读更多关于 MySQL 开发、实验室发布和 DMRs 的信息。

并行开发策略允许 Oracle 在开发新功能的同时维护其当前版本。当开发和缺陷修复在 5.5 中继续时，在 5.6 中读到新的特性是很常见的。这似乎令人困惑，因为我们已经习惯了商业专有软件供应商对他们自己的开发策略保密。MySQL 版本号用于跟踪版本；它们包含一个由两部分组成的产品系列号和一个版本号。例如，版本 5.6.12 是 5.6 产品线的第十二个版本。

![image](images/sq.jpg) **提示**与 Oracle 通信时，始终包含完整的版本号。仅仅陈述“alpha 版本”或“最新版本”是不够清楚的，不足以恰当地满足您的需求。

这种多次发布的理念有一些有趣的副作用。遇到使用旧版本 MySQL 的组织并不罕见。事实上，我遇到过几个与我合作的机构，他们仍然在使用 4.x 版本的产品线。这一理念实际上消除了商业专有软件所经历的升级外壳游戏。也就是说，每当供应商发布一个新版本，它就停止对旧版本的开发，在许多情况下停止对旧版本的支持。随着主要架构的改变，客户被迫相应地改变他们的环境和开发工作。这增加了维护基于商业专有软件的产品线的大量成本。多版本哲学通过允许组织将他们自己的产品在流通中保持更长的时间，并保证持续的支持，将组织从这种负担中解放出来。即使出现新的架构变化，如 MySQL 版，组织也有更长的准备时间，因此可以以最有效的方式消耗资源，而不必匆忙或改变长期计划。

虽然您可以下载任何版本的 MySQL，但首先要考虑您对该软件的使用。如果您计划在自己的生产环境中将它用作企业服务器,您可能希望将下载限制在产品线的稳定版本上。另一方面，如果您正在使用 LAMP 栈或另一个开发环境构建一个新的系统，那么任何其他的发布阶段都可以用于开发工作。大多数用户将下载他们打算在其环境中使用的最新版本的稳定版本。

我应该使用这本书的哪个版本？

就本书中的练习和实验而言，MySQL 5.6 的任何版本(阶段)都适用。MySQL 5.6 是 MySQL 发展过程中的一个重要里程碑，不仅因为它的高级特性和性能改进，还因为它在架构和源代码方面的重大变化。虽然本书的某些部分可能适用于 5.1 或 5.5 版本(例如，添加新功能)，但大多数示例都是针对 5.6 版本的。

对于任何新的开发，Oracle 建议使用最新的稳定版本。这意味着，如果您计划向 MySQL 添加功能，并且您正在参与全球开发者社区，那么您应该在服务器最稳定的时候向其添加新功能。这为您的代码获得成功提供了最大的机会。

还要考虑到，虽然版本的阶段可能表明了它相对于新特性的状态，但是您不应该自动地将不稳定性与早期阶段相关联，或者将稳定性与后期阶段相关联。根据您对软件的使用，稳定性可能会有所不同。例如，如果您正在开发中使用 MySQL 在 LAMP stack 中构建一个新的电子商务站点，并且您没有使用 alpha 阶段引入的任何新特性，那么您使用的稳定性实际上与任何其他阶段都是一样的。最好的经验是选择具有您在最新开发阶段需要的特性的版本。

**克隆人战争？**

如果你花时间研究 MySQL，你很可能遇到过至少一个声称是 MySQL 的衍生物的数据库系统。虽然一些供应商提供了 MySQL 的变体(有时称为 fork 或 port)——一些由小型创业公司支持，一个由 MySQL 的原始开发人员支持——但这些供应商中没有一个能够与 Oracle 培育 MySQL 的专业知识和开发能力相媲美。

你可能会遇到一些变体，也许你可以用在这本书上。然而，考虑到 MySQL 在最近版本中的主要进步，您最好使用官方的 MySQL 源代码来探索源代码。一些变体最终可能会包含最新的功能，但目前它们不太可能与 Oracle 的版本保持同步。提供变体的供应商包括 MariaDB、SkySQL 和 Percona。

为什么要修改 MySQL？

修改 MySQL 不是一件小事。如果您是一名经验丰富的 C/C++程序员，并且理解关系数据库系统的构造，您可能会马上投入其中。我们其余的人需要考虑为什么要修改数据库服务器系统，并仔细计划我们的修改。

你想修改 MySQL 的原因有很多。也许您需要一个不可用的数据库服务器或客户机功能。或者，您可能有一个定制的应用程序套件，它需要特定类型的数据库行为，而不是必须适应商业专有系统，对您来说，修改 MySQL 来满足您的需求更容易、更便宜。最有可能的情况是，您的组织负担不起复制 MySQL 数据库系统的复杂性和精细化，但是您需要一些东西作为您的解决方案的基础。使您的应用程序成为世界级的，还有什么比基于世界级的数据库系统更好的方法呢？

![image](images/sq.jpg) **注**如果一个特性真的有用，有人认为它有益，开源的好处在于这个特性会融入到产品中。某个地方的某个人会贡献并构建这个特性。

像所有有效的软件开发人员一样，你必须首先计划好你要做什么。从您最熟悉的计划设备和材料开始，列出您认为需要数据库服务器(或客户机)做的所有事情。花些时间评估 MySQL，看看是否有你想要的特性已经存在，并记录下它们的行为。完成这项研究后，你会对差距所在有更好的了解。这种“差距分析”将为您提供一个集中的特性和所需修改的列表。一旦确定了需要添加的特性，就可以开始检查 MySQL 源代码并尝试添加新特性。

![image](images/sq.jpg) **警告**在计划修改时，一定要彻底调查当前的 MySQL 特性。您将需要检查和试验与您的需求相似的所有 SQL 命令。虽然您可能无法使用当前的功能，但是检查现有的功能将使您能够形成一个已知行为和性能的基线，您可以用它来比较您的新功能。可以肯定的是，全球开发者社区的成员将会仔细检查新的特性，并删除那些他们认为使用当前特性可以最好地实现的特性。

这本书将向您介绍 MySQL 源代码，并教您如何添加新功能，以及改变什么(和不改变什么)的最佳实践。

后面的章节还将详细介绍您获取源代码的选项，以及如何将您的更改合并到适当的代码路径(分支)中。您还将了解 Oracle 编码指南的详细内容，这些指南规定了您的代码应该是什么样子，以及您应该避免哪些代码结构。

在 MySQL 中可以修改什么？有限制吗？

开源软件的美妙之处在于，您可以访问该软件的源代码(由各自的开源许可证保证)。这意味着你可以访问整个软件的所有内部工作。你有没有想过一个特定的开源软件产品是如何工作的？您可以通过下载源代码并研究它来找到答案。

有了 MySQL，事情就没那么简单了。MySQL 中的源代码非常复杂，在某些情况下，很难阅读和理解。可以说代码的可理解性很低。原始开发人员通常认为源代码具有“天才因素”，即使对于最好的 C/C++程序员来说，这也是一个挑战。

虽然 C/C++代码的复杂性挑战可能是一个问题，但它决不会限制您修改软件的能力。大多数开发人员修改源代码来添加新的 SQL 命令或改变现有的 SQL 命令，以更好地满足他们的数据库需求。然而，机会远不止简单地改变 MySQL 的 SQL 行为。您可以更改优化器、内部查询表示，甚至查询缓存机制。

你可能遇到的一个挑战不会来自你的任何一个开发人员；它可能来自你的高级技术涉众。例如，我曾经对 MySQL 源代码进行了重大修改，以解决一个具有挑战性的问题。组织中的高级技术涉众质疑我的项目的有效性，不是因为解决方案或它的设计，而是因为我正在修改服务器代码本身的基础。一个利益相关者坚持认为我的改变“违背了 30 年来的数据库理论，并尝试了真正的实现。”我当然希望你永远不要遇到这种行为，但是如果你遇到了，并且你已经研究过哪些功能是可用的，它们如何不能满足(或部分满足)你的需求，你的答案应该包含无可争议的事实。如果你确实得到了这个问题或者类似的问题，提醒你的高级技术涉众开源软件的优点是它可以被修改，而且经常被修改。你也可以考虑解释一下你的新特性是做什么的，以及它将如何为每个人改善整个系统。如果你能做到这一点，你就能度过难关。

在修改 MySQL 时，你可能面临的另一个挑战是“为什么要用 MySQL？”专家们会很快指出有几个开源数据库系统可供选择。最流行的是 MySQL、Firebird、PostgreSQL 和 Berkeley DB。在开发项目中选择 MySQL 而不是其他数据库系统的原因包括:

*   MySQL 是一个支持全套 SQL 命令的关系数据库管理系统。一些开源数据库系统，如 PostgreSQL，是对象关系数据库系统，使用 API 或库进行访问，而不是接受 SQL 命令。一些开源系统使用的架构可能不适合您的环境。例如，Apache Derby 基于 Java，可能无法为您的嵌入式应用程序提供最佳性能。
*   MySQL 是使用 C/C++构建的，它可以为几乎所有的 Linux 平台以及 Microsoft Windows 和 Macintosh 操作系统构建。有些开源系统可能不适合您选择的开发语言。如果您必须将系统移植到您正在运行的 Linux 版本，这可能是一个问题。
*   MySQL 被设计成客户机/服务器体系结构。一些开源系统不可扩展到基于客户端的嵌入式系统之外。例如，Berkeley DB 是一组客户端库，而不是一个独立的数据库系统。
*   MySQL 是一个成熟的数据库服务器，拥有世界领先的数据库系统所拥有的经过验证的稳定性记录。一些开源数据库系统可能没有 MySQL 的安装基础，或者可能不提供您在企业数据库服务器中需要的特性。

很明显，对于开发需求和修改发生的环境来说，挑战是独特的。无论您的需求是什么，您都可以确保您可以完全访问所有的源代码，并且您的修改只受您的想象力的限制。

MySQL 的双许可证

MySQL 被授权为 GPL 下的开源软件。服务器和客户端软件以及工具和库都包含在 GPL 中。Oracle 已经将 GPL 作为其商业模式的一个主要焦点。它坚定地致力于 GNU 开源社区。

![image](images/sq.jpg) **提示【MySQL 的完整 GPLv2 许可文本可以在[http://dev . MySQL . com/doc/ref man/5.6/en/license-GNU-GPL-2-0 . html](http://dev.mysql.com/doc/refman/5.6/en/license-gnu-gpl-2-0.html)找到。如果你打算修改 MySQL 或者你以前从未见过 GPL 许可，请仔细阅读。如果您对如何解释您使用的许可证有任何疑问，请联系 Oracle。**

Oracle 通过向全球开发者社区公开其源代码获得了许多好处。源代码由公众定期审查评估，第三方组织定期审核源代码，开发过程促进了公开交流和反馈的论坛，源代码在许多不同的环境中编译和测试。没有其他数据库供应商能够在保持世界级的稳定性、可靠性和功能的同时做出这样的声明。

MySQL 也作为商业产品获得许可。商业许可证允许 Oracle 拥有源代码(如前所述)以及名称、徽标和文档(如书籍)的版权。这是独一无二的，因为大多数开源公司并不自称拥有任何东西——相反，他们的知识产权是他们的经验和专业知识。Oracle 保留了该软件的知识产权，同时利用全球开发者社区的支持来扩展和发展该软件。甲骨文拥有自己的 MySQL 开发团队，在全球拥有 100 多名工程师。尽管来自世界各地的开发人员参与了 MySQL 的开发，但 Oracle 雇佣了其中的许多人。

**自由开放源码例外**

甲骨文的自由/开源软件例外条款允许在应用程序中使用 GPL 许可的客户端库，而不要求衍生作品受 GPL 约束。如果您正在开发使用 MySQL 客户端库的应用程序，请查看 MySQL FOSS 异常以了解完整的详细信息。

[http://www.mysql.com/about/legal/licensing/foss-exception/](http://www.mysql.com/about/legal/licensing/foss-exception/)

Oracle 提供了服务器的几个主要 MySQL 版本。大多数是商业产品，可能没有相应的 GPL 版本。例如，虽然您可以下载 MySQL Cluster 的 GPL 版本，但您不能下载 MySQL Cluster 运营商级版本 的商业版本。[表 1-1](#Tab1) 总结了 Oracle 目前提供的各种服务器版本(撰写本章时)及其基本许可费用。

[表 1-1](#_Tab1) 。MySQL 服务器产品和定价

![Table1.1](images/Table1.1.jpg)

****Costs shown are representative as of the publication of this work. Contact Oracle for accurate and up-to-date pricing.

![image](images/sq.jpg) **提示**在[http://mysql.com/buy-mysql/](http://mysql.com/buy-mysql/)了解有关甲骨文定价和购买选项的更多信息

`.`

那么，到底能不能修改 MySQL 呢？

在讨论了在 GNU 公共许可证下使用开源软件的局限性之后，您可能想知道，您是否真的可以修改它。答案是:看情况。

您可以在 GPL 下修改 MySQL，当然，前提是如果您打算发布您的更改，您必须将这些更改交给项目所有者，从而履行您参与全球开发人员社区的义务。如果您出于个人或教育目的试验或使用修改，您没有义务交出您的更改。

问题的核心归结于修改的好处。如果你增加了别人感兴趣的能力，而不是你自己，你应该分享它们。无论在何种情况下，在进行任何想要共享的修改之前，请务必咨询 Oracle。

修改 MySQL 的指南

在处理诸如修改 MySQL 等系统的任务时要小心。关系数据库系统是一组复杂的服务，这些服务以提供快速、可靠的数据访问的方式分层。您不希望打开源代码，插入自己的代码来看看会发生什么(但是欢迎您尝试)。相反，计划您的更改，并仔细瞄准与您的需求相关的源代码部分。

在修改了 MySQL 这样的大型系统之后，我想传授一些简单的指导原则，让你在修改 MySQL 时有一个积极的体验。

首先，决定您将使用哪个许可证。如果您已经在开源许可下使用 MySQL，并且可以自己实现修改，请继续使用 GPL。在这种情况下，你必须延续开源咒语，并回馈社区以换取免费提供的东西。根据 GPL 的条款，开发者必须做出这些改变。如果您在商业许可下使用 MySQL 或需要修改支持，请购买合适的 MySQL 版本以匹配您的服务器(CPU 核心数),并就您的修改咨询 Oracle。但是，如果您不打算分发这些修改，并且您可以在 MySQL 的未来版本中支持它们，那么您不需要更改为商业许可或者将您的商业许可更改为 GPL。

另一个建议是创建一个开发者日志，记录你所做的每一个改变或者你发现的每一个有趣的发现。你不仅可以一步一步地记录你的工作，还可以用日志来记录你正在做的事情。通过回顾和阅读你过去的日志，你会惊奇地发现你的研究。我在我的工程笔记本上发现了许多潦草的金块信息。

在尝试源代码的同时，也要在源代码中做笔记。在更改前后用注释行或注释块对源代码进行注释。这使得使用您最喜欢的文本解析器或搜索程序来定位您的所有更改变得很容易。下面演示了一种注释更改的方法:

```
/* BEGIN MY MODIFICATION */
/* Purpose of modification: experimentation. */
/* Modified by: Chuck */
/* Date modified: 30 May 2012 */
if (something_interesting_happens_here)
{
do_something_really_cool;
}
/* END MY MODIFICATION */
```

最后，不要害怕探索 MySQL 网站上的免费知识库和论坛，或者寻求全球开发者社区的帮助。这些是你最大的财富。在你发帖到某个论坛之前，确保你已经做了功课。失去信心的最快方式是在论坛上发布一条消息，却得到某人简短(但礼貌地)引用文档的回复。让你的帖子简明扼要。你不需要详细解释你为什么要这么做——只需要发布你的问题，并提供关于你所遇到的问题的所有相关信息。确保你发布到正确的论坛。大多数都是有主持人的，如果你有任何疑问，请咨询主持人，以确保你在正确的论坛上发布你的主题。

![image](images/sq.jpg) **提示**http://planet.mysql.com/是一个了解 MySQL 社区动态的好网站 ，这里汇集了来自世界各地的许多关于 MySQL 的博客帖子。

一个真实世界的例子:TiVo

你有没有想过是什么让你的 TiVo 滴答作响？如果您知道它运行在一个嵌入式 Linux 版本上，您会感到惊讶吗？

吉姆·巴顿和迈克·拉姆齐在 1997 年设计了最初的 TiVo 产品。它被定位为基于家庭网络的多媒体服务器，为瘦客户机提供流媒体内容。自然，像这样的设备必须容易学习，甚至更容易使用，但最重要的是，它必须无错误地操作，并优雅地处理电源中断(和用户错误)。

Barton 正在试验几种形式的 Linux，在 Silicon Graphics (SGI)工作时，他赞助了一个 Linux 到 SGI Indy 平台的移植。主要由于稳定的文件系统、网络、内存处理和开发者工具的支持，Barton 相信将一个版本的 Linux 移植到 TiVo 平台是可能的，并且 Linux 可以处理 TiVo 产品的实时性能目标。

然而，巴顿和拉姆齐面临着来自同龄人的挑战。当时，许多人对开源持怀疑和蔑视的态度。商业软件专家断言，开放源码软件在实时环境中永远不可靠。此外，他们认为，基于 GPL 的商业专有产品不允许修改，如果他们继续下去，该项目将成为版权诉讼和无休止的法律辩论的噩梦。幸运的是，巴顿和拉姆齐没有被吓住，仔细研究了 GPL。他们的结论是，GPL 不仅是可行的，它还允许他们保护自己的知识产权。

尽管最初的 TiVo 产品旨在成为服务器，但巴顿和拉姆齐认为带宽不足以支持如此崇高的目标。相反，他们将产品重新设计成一种客户端设备，称为 TiVo 客户端设备(TCD)，就像一台复杂的录像机。他们想提供付费服务来提供电视指南和 TCD 接口。这将允许家庭用户提前选择他们想要的节目，并对 TCD 进行编程以记录它们。实际上，他们创造了现在众所周知的数字录像机(DVR)。

TCD 硬件包括一台小型嵌入式计算机，带有硬盘和内存。使用 MPEG 2 编码器和解码器创建硬件接口来读取和写入视频(视频输入和视频输出)。附加的输入/输出(I/O)设备包括音频和电信(用于访问 TiVo 服务)。TCD 还必须允许多重处理能力，以便允许记录一个信号(通道)同时回放另一个信号(通道)。这些特性需要良好的内存和磁盘管理子系统。巴顿和拉姆齐意识到这些目标对任何控制系统都是一个挑战。此外，视频接口绝不能以任何方式中断或损坏。

Barton 和 Ramsay 最需要的是一个具有完善的磁盘子系统、支持多任务处理、能够优化硬件(CPU、内存)使用的系统。因此，Linux 是 TCD 操作系统的合理选择。生产目标和预算约束限制了 CPU 的选择。TCD 选择了 IBM PowerPC 403GCX 处理器。不幸的是，在选择的处理器上没有运行 Linux 的端口。这意味着巴顿和拉姆齐必须将 Linux 移植到处理器平台上。

虽然移植是成功的，但 Barton 和 Ramsay 发现他们需要对 Linux 内核进行一些专门的定制，以满足硬件的需求和限制。例如，它们绕过了文件系统缓冲区高速缓存，以便允许更快地移动或处理进出用户空间的视频信号。他们还增加了广泛的性能增强、日志记录和恢复功能，以确保 TCD 可以从断电或用户错误中快速恢复。

运行 TCD 的应用程序是在基于 Linux 的个人计算机上构建的，并毫不夸张地移植到修改后的 Linux 操作系统上——这证明了 Linux 操作系统的稳定性和互操作性。当 Barton 和 Ramsay 完成移植和应用工作后，他们进行了广泛的测试，并于 1999 年 3 月交付了世界上第一台 DVR。

TCD 是使用最广泛的消费产品之一，运行定制的嵌入式 Linux 操作系统。显然，TCD 的故事是一个通过修改开源软件可以实现什么的光辉例子。然而，故事并没有到此结束。Barton 和 Ramsay 发表了他们的 Linux 内核移植，并附有源代码。他们的增强已经融入了最新版本的 Linux 内核。

**说服你的老板修改开源软件**

如果你有一个想法和一个基于它的商业模式，走开源路线可以在将你的产品推向市场的过程中节省大量时间。事实上，您的项目可能会节省大量的开发收入，并允许您比竞争对手更快地将产品推向市场。如果你需要修改开源软件，这一点尤其正确——你已经做了功课，可以展示使用开源软件的成本效益。

不幸的是，许多经理已经被商业专有软件世界所限制，拒绝接受基于开源软件的产品来产生收入的概念。那么如何改变他们的想法呢？用 TiVo 的故事作为弹药。向你的老板展示你从 TiVo 故事和本章剩余部分中获得的知识，以驱散关于 GPL 和开源软件可靠性的神话。不过，要小心。如果你像大多数开源专家一样，你的热情经常会被解释为对高级技术人员的威胁。

列出坚持商业专有观点的技术利益相关者。让这些人参与关于开源软件的对话，并回答他们的问题。最重要的是，要有耐心。这些人并没有你想象的那么厚，最终他们会分享你的热情。

一旦你让高级技术人员接受了教育，并且有了开源思维，就用一个修改过的提议重新让你的管理层参与进来。一定要带上一个高级技术人员作为挡箭牌(和理智的声音)。在这种情况下，胜利正在扭转商业所有权统治的潮流。

摘要

在本章中，您探索了开源软件的起源以及 MySQL 成为世界级数据库管理系统的过程。您了解了什么是开源系统，以及它们与商业专有系统的比较。您看到了开源许可的弱点，并发现了作为全球开发者社区成员的责任。

您还了解了如何使用 MySQL 进行开发，并了解了源代码的特征和修改指南。您了解了 Oracle 的双许可实践以及根据您的需求修改 MySQL 的意义。最后，您看到了一个在商业产品中成功集成开源系统的例子。

在接下来的章节中，您将了解更多关于关系数据库系统的剖析，以及如何开始定制 MySQL 以满足您的需求。稍后，在本书的第 2 部分和第 3 部分，将向您介绍 MySQL 的内部工作原理，并探索代码中最私密的部分。

<sup><sup>[http://www . GNU . org/GNU/thegnupproject . html](http://www.gnu.org/gnu/thegnuproject.html)</sup></sup>

[<sup>2</sup>](#_Fn2)【http://www.microsoft.com/en-us/openness/default.aspx#home】T4

[<sup>3</sup>](#_Fn3)【http://www.research.att.com/∼bs/bs_faq.html#name】T4